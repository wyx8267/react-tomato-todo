(window["webpackJsonptomato-todo"]=window["webpackJsonptomato-todo"]||[]).push([[0],{145:function(e,t,n){e.exports=n(251)},154:function(e,t,n){},155:function(e,t,n){},173:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){},231:function(e,t,n){},240:function(e,t,n){},241:function(e,t,n){},250:function(e,t,n){},251:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(7),c=n.n(a),s=n(24),i=n(61),u=n(49),p=Object(i.b)({todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TODO":return[].concat(Object(u.a)(e),[t.payload]);case"INIT_TODOS":return Object(u.a)(t.payload);case"UPDATE_TODO":return e.map(function(e){return e.id===t.payload.id?t.payload:e});case"EDIT_TODO":return e.map(function(e){return e.id===t.payload?Object.assign({},e,{editing:!0}):Object.assign({},e,{editing:!1})});default:return e}},tomatoes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TOMATO":return[t.payload].concat(Object(u.a)(e));case"INIT_TOMATOES":return Object(u.a)(t.payload);case"UPDATE_TOMATO":return e.map(function(e){return e.id===t.payload.id?t.payload:e});default:return e}}}),l=Object(i.c)(p),d=(n(154),n(12)),m=n(11),f=n(15),O=n(13),h=n(16),b=n(48),y=n(28),j="";j="/react-tomato-todo";var v=Object(y.a)({basename:j}),g=(n(155),n(17)),T=n.n(g),w=n(23),E=n(257),k=n(10),D=n(31),P=n(132),C=n.n(P).a.create({baseURL:"https://gp-server.hunger-valley.com/",headers:{"t-app-id":"nnisJpYRKhMVWLpTdNxf8UnN","t-app-secret":"89VekUFZPK2CWpHRGpCHGgvb"}});C.interceptors.request.use(function(e){var t=localStorage.getItem("x-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},function(e){return console.error(e),Promise.reject(e)}),C.interceptors.response.use(function(e){return e.headers["x-token"]&&localStorage.setItem("x-token",e.headers["x-token"]),e},function(e){return 401===e.response.status&&v.push("login"),Promise.reject(e)});var x=C,N=n(67),S=(n(173),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(O.a)(t).call(this,e))).onChange=function(e,t){var r={};r[e]=t,n.setState(r)},n.submit=Object(w.a)(T.a.mark(function e(){var t,r,o;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,r=t.account,o=t.password,e.prev=1,e.next=4,x.post("sign_in/user",{account:r,password:o});case 4:n.props.history.push("/"),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),new Error(e.t0);case 10:case"end":return e.stop()}},e,null,[[1,7]])})),n.state={account:"",password:""},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.account,o=t.password;return r.createElement("div",{className:"Login",id:"Login"},r.createElement("h1",null,"\u756a\u8304TODO-\u767b\u5f55"),r.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",prefix:r.createElement(k.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),value:n,onChange:function(t){return e.onChange("account",t.target.value)}}),r.createElement(E.a.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",value:o,onChange:function(t){return e.onChange("password",t.target.value)}}),r.createElement(D.a,{className:"loginButton",type:"primary",onClick:this.submit},"\u767b\u5f55"),r.createElement("p",null,"Or ",r.createElement(N.a,{to:"/signUp"},"\u70b9\u6b64\u6ce8\u518c")))}}]),t}(r.Component)),_=n(27),I=n(255),U=n(259),M=function(e){return{type:"UPDATE_TODO",payload:e}};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var H=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(O.a)(t).call(this,e))).onKeyUp=function(e){13===e.keyCode&&""!==n.state.description&&n.postTodo()},n.postTodo=Object(w.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.post("todos",{description:n.state.description});case 3:t=e.sent,n.props.addTodo(t.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:n.setState({description:""});case 11:case"end":return e.stop()}},e,null,[[0,7]])})),n.state={description:""},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state.description,n=t?r.createElement(k.a,{type:"enter",onClick:this.postTodo}):r.createElement("span",null);return r.createElement("div",{className:"TodoInput",id:"TodoInput"},r.createElement(E.a,{placeholder:"\u6dfb\u52a0\u65b0\u4efb\u52a1",suffix:n,value:t,onChange:function(t){return e.setState({description:t.target.value})},onKeyUp:this.onKeyUp}))}}]),t}(r.Component),K={addTodo:function(e){return{type:"ADD_TODO",payload:e}}},F=Object(s.b)(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach(function(t){Object(_.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({todos:e.todos},t)},K)(H),L=n(260),W=n(136),B=n.n(W);n(221);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var G=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(O.a)(t).call(this,e))).updateTodo=function(){var e=Object(w.a)(T.a.mark(function e(t){var r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.completed&&(t.completed_at=new Date),e.prev=1,e.next=4,x.put("todos/".concat(n.props.id),t);case 4:r=e.sent,n.props.updateTodo(r.data.resource),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),n.editTodo=function(){n.props.editTodo(n.props.id)},n.onKeyUp=function(e){13===e.keyCode&&""!==n.state.editText&&n.updateTodo({description:n.state.editText})},n.state={editText:n.props.description},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=r.createElement("div",{className:"editing"},r.createElement("input",{type:"text",value:this.state.editText,onChange:function(t){return e.setState({editText:t.target.value})},onKeyUp:this.onKeyUp}),r.createElement("div",{className:"iconWrapper"},r.createElement(k.a,{type:"enter"}),r.createElement(k.a,{type:"delete",theme:"filled",onClick:function(t){return e.updateTodo({deleted:!0})}}))),n=r.createElement("span",{className:"text",onDoubleClick:this.editTodo},this.props.description),o=B()({TodoItem:!0,editing:this.props.editing,completed:this.props.completed});return r.createElement("div",{className:o,id:"TodoItem"},r.createElement(L.a,{checked:this.props.completed,onChange:function(t){return e.updateTodo({completed:t.target.checked})}}),this.props.editing?t:n)}}]),t}(r.Component),J={editTodo:function(e){return{type:"EDIT_TODO",payload:e}},updateTodo:M},V=Object(s.b)(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach(function(t){Object(_.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({todos:e.todos},t)},J)(G);n(222);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var z,Y=function(e){function t(e){return Object(d.a)(this,t),Object(f.a)(this,Object(O.a)(t).call(this,e))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.createElement("div",{className:"Todos",id:"Todos"},r.createElement(F,null),r.createElement("div",{className:"todoList"},this.unCompletedTodos.map(function(e){return r.createElement(V,Object.assign({key:e.id},e))})))}},{key:"unDeletedTodos",get:function(){return this.props.todos.filter(function(e){return!e.deleted})}},{key:"unCompletedTodos",get:function(){return this.unDeletedTodos.filter(function(e){return!e.completed})}},{key:"completedTodos",get:function(){return this.unDeletedTodos.filter(function(e){return e.completed})}}]),t}(r.Component),Z={updateTodo:M},$=Object(s.b)(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach(function(t){Object(_.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({todos:e.todos},t)},Z)(Y),Q=n(258),X=(n(223),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(O.a)(t).call(this,e))).state={countDown:n.props.timer},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;z=setInterval(function(){var t=e.state.countDown;e.setState({countDown:t-1e3}),document.title="".concat(e.countDown," - \u756a\u8304TODO"),t<0&&(document.title="\u756a\u8304TODO",e.props.onFinish(),clearInterval(z))},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(z)}},{key:"render",value:function(){var e=1-this.state.countDown/this.props.duration;return r.createElement("div",{className:"CountDown",id:"CountDown"},r.createElement("span",{className:"restTime"},this.countDown),r.createElement("div",{className:"progress",style:{width:"".concat(100*e,"%")}}))}},{key:"countDown",get:function(){var e=Math.floor(this.state.countDown/6e4),t=Math.floor(this.state.countDown/1e3%60);return"".concat(e<10?"0".concat(e):e,":").concat(t<10?"0".concat(t):t)}}]),t}(r.Component)),ee=(n(224),Q.a.confirm),te=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(O.a)(t).call(this,e))).onKeyUp=function(e){13===e.keyCode&&""!==n.state.description&&(n.updateTomato({description:n.state.description,ended_at:new Date}),n.setState({description:""}))},n.onFinish=function(){n.forceUpdate()},n.showConfirm=function(){ee({title:"\u60a8\u76ee\u524d\u6b63\u5728\u4e00\u4e2a\u756a\u8304\u5de5\u4f5c\u65f6\u95f4\u4e2d\uff0c\u8981\u653e\u5f03\u8fd9\u4e2a\u756a\u8304\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){n.abortTomato()},onCancel:function(){}})},n.abortTomato=function(){n.updateTomato({aborted:!0}),document.title="\u756a\u8304TODO"},n.updateTomato=function(){var e=Object(w.a)(T.a.mark(function e(t){var r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.put("tomatoes/".concat(n.props.unfinishedTomato.id),t);case 3:r=e.sent,n.props.updateTomato(r.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),n.state={description:""},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=r.createElement("div",null);if(void 0===this.props.unfinishedTomato)t=r.createElement(D.a,{className:"startTomatoButton",onClick:function(){e.props.startTomato()}},"\u5f00\u59cb\u756a\u8304");else{var n=Date.parse(this.props.unfinishedTomato.started_at),o=this.props.unfinishedTomato.duration,a=(new Date).getTime();if(a-n>o)t=r.createElement("div",{className:"inputWrapper"},r.createElement(E.a,{value:this.state.description,placeholder:"\u8bf7\u8f93\u5165\u5b8c\u6210\u7684\u4efb\u52a1\u5185\u5bb9",onChange:function(t){return e.setState({description:t.target.value})},onKeyUp:function(t){return e.onKeyUp(t)}}),r.createElement(k.a,{type:"close-circle",className:"abort",onClick:this.showConfirm}));else if(a-n<o){var c=o-a+n;t=r.createElement("div",{className:"countDownWrapper"},r.createElement(X,{timer:c,onFinish:this.onFinish,duration:o}),r.createElement(k.a,{type:"close-circle",className:"abort",onClick:this.showConfirm}))}}return r.createElement("div",{className:"TomatoAction",id:"TomatoAction"},t)}}]),t}(r.Component),ne=n(254),re=n(252),oe=(n(228),function(e){return r.createElement("div",{className:"TomatoItem"},r.createElement("span",{className:"timeRange"},Object(ne.a)(Object(re.a)(e.started_at),"HH:mm")," - ",Object(ne.a)(Object(re.a)(e.ended_at),"HH:mm")),r.createElement("span",{className:"description"},e.description))}),ae=function(e){function t(e){return Object(d.a)(this,t),Object(f.a)(this,Object(O.a)(t).call(this,e))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.dates.map(function(t){var n=e.props.finishedTomatoes[t];return r.createElement("div",{key:t,className:"dailyTomatoes"},r.createElement("div",{className:"title"},r.createElement("span",{className:"dateTime"},Object(ne.a)(Object(re.a)(t),"M\u6708dd\u65e5")),r.createElement("span",{className:"finishedCount"},"\u5b8c\u6210\u4e86",n.length,"\u4e2a\u756a\u8304")),n.map(function(e){return r.createElement(oe,Object.assign({key:e.id},e))}))});return r.createElement("div",{className:"TomatoList",id:"TomatoList"},t)}},{key:"dates",get:function(){return Object.keys(this.props.finishedTomatoes).sort(function(e,t){return Date.parse(t)-Date.parse(e)}).splice(0,3)}}]),t}(r.Component),ce=n(63),se=n.n(ce);n(229);function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var ue=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(O.a)(t).call(this,e))).startTomato=Object(w.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.post("tomatoes",{duration:15e5});case 3:t=e.sent,n.props.addTomato(t.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.createElement("div",{className:"Tomatoes",id:"Tomatoes"},r.createElement(te,{startTomato:this.startTomato,unfinishedTomato:this.unfinishedTomato,updateTomato:this.props.updateTomato}),r.createElement(ae,{finishedTomatoes:this.finishedTomatoes}))}},{key:"unfinishedTomato",get:function(){return this.props.tomatoes.filter(function(e){return!e.description&&!e.ended_at&&!e.aborted})[0]}},{key:"finishedTomatoes",get:function(){var e=this.props.tomatoes.filter(function(e){return e.description&&e.ended_at&&!e.aborted});return se.a.groupBy(e,function(e){return Object(ne.a)(new Date(e.started_at),"yyyy-MM-dd")})}}]),t}(r.Component),pe={addTomato:function(e){return{type:"ADD_TOMATO",payload:e}},updateTomato:function(e){return{type:"UPDATE_TOMATO",payload:e}}},le=Object(s.b)(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(n,!0).forEach(function(t){Object(_.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({tomatoes:e.tomatoes},t)},pe)(ue),de=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(O.a)(t).call(this,e))).point=function(){var e=Object.keys(n.props.data).sort(function(e,t){return Date.parse(e)-Date.parse(t)}),t=e[0];if(t){var r,o=(new Date).getTime()-Date.parse(t),a=0,c=e.map(function(e){var c=(Date.parse(e)-Date.parse(t))/o*240,s=60*(1-(a+=n.props.data[e].length)/n.props.totalFinishCount);return r=s,"".concat(c,",").concat(s)});return["0,60"].concat(Object(u.a)(c),["240,".concat(r),"240,60"]).join(" ")}return"0,60 240,60"},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.createElement("div",{className:"Polygon",id:"Polygon"},r.createElement("svg",null,r.createElement("polygon",{fill:"rgba(215,78,78,0.1)",stroke:"rgba(215,78,78,0.5)",strokeWidth:"1",points:this.point()})))}}]),t}(r.Component),me=n(253),fe=n(256);n(230);function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var he=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(O.a)(t).call(this,e))).updateTodo=function(){var e=Object(w.a)(T.a.mark(function e(t){var r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.put("todos/".concat(n.props.todo.id),t);case 3:r=e.sent,n.props.updateTodo(r.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t,n,o=this;return"completed"===this.props.itemType?(t="HH:mm",n=this.props.todo.updated_at,e=r.createElement("div",{className:"action"},r.createElement("span",{onClick:function(){return o.updateTodo({completed:!1})}},"\u6062\u590d"),r.createElement("span",{onClick:function(){return o.updateTodo({deleted:!0})}},"\u5220\u9664"))):"deleted"===this.props.itemType&&(t="yyyy-MM-dd",n=this.props.todo.created_at,e=r.createElement("div",{className:"action"},r.createElement("span",{onClick:function(){return o.updateTodo({deleted:!1})}},"\u6062\u590d"))),r.createElement("div",{className:"TodoHistoryTodoItem",id:"TodoHistoryTodoItem"},r.createElement("div",{className:"text"},r.createElement("span",{className:"time"},Object(ne.a)(Object(re.a)(n),t)),r.createElement("span",{className:"description"},this.props.todo.description)),e)}}]),t}(r.Component),be={updateTodo:M},ye=Object(s.b)(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(n,!0).forEach(function(t){Object(_.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e)},be)(he);n(231);function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var ve=fe.a.TabPane,ge=function(e){function t(e){return Object(d.a)(this,t),Object(f.a)(this,Object(O.a)(t).call(this,e))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"finishedTodos",get:function(){return this.props.todos.filter(function(e){return e.completed&&!e.deleted})}},{key:"deletedTodos",get:function(){return this.props.todos.filter(function(e){return e.deleted})}},{key:"dailyFinishedTodos",get:function(){return se.a.groupBy(this.finishedTodos,function(e){return Object(ne.a)(new Date(e.updated_at),"yyyy-MM-dd")})}},{key:"finishedDates",get:function(){return Object.keys(this.dailyFinishedTodos).sort(function(e,t){return Date.parse(t)-Date.parse(e)})}}]),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.finishedDates.map(function(t){return r.createElement("div",{key:t,className:"dailyTodos"},r.createElement("div",{className:"summary"},r.createElement("p",{className:"date"},r.createElement("span",null,t),r.createElement("span",null,function(e){switch(Object(me.a)(new Date(e))){case 1:return"\u5468\u4e00";case 2:return"\u5468\u4e8c";case 3:return"\u5468\u4e09";case 4:return"\u5468\u56db";case 5:return"\u5468\u4e94";case 6:return"\u5468\u516d";case 0:return"\u5468\u65e5"}}(t))),r.createElement("p",{className:"finishedCount"},"\u5b8c\u6210\u4e86",e.dailyFinishedTodos[t].length,"\u4e2a\u4efb\u52a1")),r.createElement("div",{className:"todoList"},e.dailyFinishedTodos[t].map(function(e){return r.createElement(ye,{key:e.id,todo:e,itemType:"completed"})})))}),n=this.deletedTodos.map(function(e){return r.createElement(ye,{key:e.id,todo:e,itemType:"deleted"})});return r.createElement(fe.a,{defaultActiveKey:"1"},r.createElement(ve,{tab:"\u5df2\u5b8c\u6210\u7684\u4efb\u52a1",key:"1"},r.createElement("div",{className:"TodoHistory",id:"TodoHistory"},t)),r.createElement(ve,{tab:"\u5df2\u5220\u9664\u7684\u4efb\u52a1",key:"2"},r.createElement("div",{className:"TodoHistory",id:"TodoHistory"},n)))}}]),t}(r.Component),Te=Object(s.b)(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(n,!0).forEach(function(t){Object(_.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({todos:e.todos},t)})(ge);n(240);function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var Ee=function(e){function t(e){return Object(d.a)(this,t),Object(f.a)(this,Object(O.a)(t).call(this,e))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.createElement("div",{className:"Statistics",id:"Statistics"},r.createElement("ul",null,r.createElement("li",null,"\u7edf\u8ba1"),r.createElement("li",null,"\u76ee\u6807"),r.createElement("li",null,"\u756a\u8304\u5386\u53f2"),r.createElement("li",null,"\u4efb\u52a1\u5386\u53f2 \u7d2f\u8ba1\u5b8c\u6210",this.finishedTodos.length,"\u4e2a\u4efb\u52a1",r.createElement(de,{data:this.dailyTodos,totalFinishCount:this.finishedTodos.length}))),r.createElement(Te,null))}},{key:"finishedTodos",get:function(){return this.props.todos.filter(function(e){return e.completed&&!e.deleted})}},{key:"dailyTodos",get:function(){return se.a.groupBy(this.finishedTodos,function(e){return Object(ne.a)(new Date(e.updated_at),"yyyy-MM-dd")})}}]),t}(r.Component),ke=Object(s.b)(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(n,!0).forEach(function(t){Object(_.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({todos:e.todos},t)})(Ee);n(241);function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var Pe=r.createElement(I.a,null,r.createElement(I.a.Item,{key:"1"},r.createElement(k.a,{type:"user"}),"\u4e2a\u4eba\u8bbe\u7f6e"),r.createElement(I.a.Item,{key:"2"},r.createElement(k.a,{type:"logout",onClick:function(){localStorage.setItem("x-token",""),v.push("/login")}}),"\u6ce8\u9500")),Ce=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(O.a)(t).call(this,e))).getTodos=Object(w.a)(T.a.mark(function e(){var t,r;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.get("todos");case 3:t=e.sent,r=t.data.resources.map(function(e){return Object.assign({},e,{editing:!1})}),n.props.initTodos(r),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),n.getTomatoes=Object(w.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.get("tomatoes");case 3:t=e.sent,n.props.initTomatoes(t.data.resources),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n.getMe=Object(w.a)(T.a.mark(function e(){var t;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("me");case 2:t=e.sent,n.setState({user:t.data});case 4:case"end":return e.stop()}},e)})),n.state={user:{}},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){var e=Object(w.a)(T.a.mark(function e(){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMe();case 2:return e.next=4,this.getTodos();case 4:return e.next=6,this.getTomatoes();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.createElement("div",{className:"Home",id:"Home"},r.createElement("header",null,r.createElement("span",{className:"logo"},"LOGO"),r.createElement(U.a,{overlay:Pe},r.createElement("span",null,this.state.user&&this.state.user.account,r.createElement(k.a,{type:"down",style:{marginLeft:8}})))),r.createElement("main",null,r.createElement(le,null),r.createElement($,null)),r.createElement(ke,null))}}]),t}(r.Component),xe={initTodos:function(e){return{type:"INIT_TODOS",payload:e}},initTomatoes:function(e){return{type:"INIT_TOMATOES",payload:e}}},Ne=Object(s.b)(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(n,!0).forEach(function(t){Object(_.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t)},xe)(Ce),Se=(n(250),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(O.a)(t).call(this,e))).onChange=function(e,t){var r={};r[e]=t,n.setState(r)},n.submit=Object(w.a)(T.a.mark(function e(){var t,r,o,a;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,r=t.account,o=t.password,a=t.passwordConfirmation,e.prev=1,e.next=4,x.post("sign_up/user",{account:r,password:o,password_confirmation:a});case 4:n.props.history.push("/"),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),new Error(e.t0);case 10:case"end":return e.stop()}},e,null,[[1,7]])})),n.state={account:"",password:"",passwordConfirmation:""},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.account,o=t.password,a=t.passwordConfirmation;return r.createElement("div",{className:"SignUp",id:"SignUp"},r.createElement("h1",null,"\u756a\u8304TODO-\u6ce8\u518c"),r.createElement(E.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",prefix:r.createElement(k.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),value:n,onChange:function(t){return e.onChange("account",t.target.value)}}),r.createElement(E.a.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",value:o,onChange:function(t){return e.onChange("password",t.target.value)}}),r.createElement(E.a.Password,{placeholder:"\u8bf7\u786e\u8ba4\u5bc6\u7801",value:a,onChange:function(t){return e.onChange("passwordConfirmation",t.target.value)}}),r.createElement(D.a,{className:"signUpButton",type:"primary",onClick:this.submit},"\u6ce8\u518c"),r.createElement("p",null,"Or ",r.createElement(N.a,{to:"/login"},"\u70b9\u6b64\u767b\u5f55")))}}]),t}(r.Component)),_e=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.createElement(b.b,{history:v},r.createElement(b.a,{exact:!0,path:"/",component:Ne}),r.createElement(b.a,{path:"/login",component:S}),r.createElement(b.a,{path:"/signUp",component:Se}))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(s.a,{store:l},o.a.createElement(_e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[145,1,2]]]);
//# sourceMappingURL=main.82883f4e.chunk.js.map